<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cell Defense Simulator - 2D Evolution Game</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div id="gameContainer">
        <header>
            <h1>üß¨ Cell Defense Simulator</h1>
            <p>Watch cells evolve, compete, and adapt in real-time!</p>
        </header>

        <div id="controlPanel">
            <div class="controls">
                <button id="playPause">‚è∏Ô∏è Pause</button>
                <button id="reset">üîÑ Reset</button>
                <button id="stepSimulation">‚è≠Ô∏è Step</button>
            </div>

            <div class="settings">
                <h4>üéõÔ∏è Basic Controls</h4>
                <label>Initial Cells: <input type="range" id="cellCount" min="10" max="200" value="50"><span
                        id="cellCountValue">50</span></label>
                <label>Simulation Speed: <input type="range" id="simSpeed" min="0.1" max="3" value="1" step="0.1"><span
                        id="simSpeedValue">1.0</span></label>

                <h4>üçé Resource Controls</h4>
                <label>Food Spawn Rate: <input type="range" id="foodSpawnRate" min="0.1" max="10" value="2.5"
                        step="0.1"><span id="foodSpawnRateValue">2.5</span></label>
                <label>Max Food: <input type="range" id="maxFood" min="50" max="2000" value="500" step="50"><span
                        id="maxFoodValue">500</span></label>

                <h4>üß¨ Evolution Controls</h4>
                <label>Mutation Rate: <input type="range" id="mutationRate" min="0.01" max="0.5" value="0.15"
                        step="0.01"><span id="mutationRateValue">0.15</span></label>
                <label>Genetic Drift: <input type="range" id="geneticDrift" min="0.01" max="0.3" value="0.08"
                        step="0.01"><span id="geneticDriftValue">0.08</span></label>

                <h4>üê£ Reproduction Controls</h4>
                <label>Birth Rate: <input type="range" id="birthRate" min="0.1" max="3.0" value="1.2" step="0.1"><span
                        id="birthRateValue">1.2</span></label>
                <label>Mitosis Cooldown: <input type="range" id="mitosisCooldown" min="100" max="1000" value="400"
                        step="50"><span id="mitosisCooldownValue">400</span></label>
                <label>Energy Threshold: <input type="range" id="energyThreshold" min="0.3" max="0.9" value="0.6"
                        step="0.05"><span id="energyThresholdValue">0.60</span></label>

                <h4>ü¶† Disease Controls</h4>
                <label>Virus Spawn Rate: <input type="range" id="virusSpawnRate" min="0.001" max="0.02" value="0.005"
                        step="0.001"><span id="virusSpawnRateValue">0.005</span></label>
                <label>Max Viruses: <input type="range" id="maxViruses" min="5" max="50" value="15"><span
                        id="maxVirusesValue">15</span></label>

                <h4>üèòÔ∏è Colony Controls</h4>
                <label>Colony Formation: <input type="range" id="colonyThreshold" min="2" max="10" value="3"><span
                        id="colonyThresholdValue">3</span></label>
                <label>Max Colony Size: <input type="range" id="maxColonySize" min="10" max="100" value="25"><span
                        id="maxColonySizeValue">25</span></label>

                <h4>‚ö° Selection Controls</h4>
                <label>Selection Pressure: <input type="range" id="selectionPressure" min="0.01" max="0.2" value="0.05"
                        step="0.01"><span id="selectionPressureValue">0.05</span></label>
                <label>Min Population: <input type="range" id="minPopulation" min="10" max="200" value="50"><span
                        id="minPopulationValue">50</span></label>
                <label>Max Population: <input type="range" id="maxPopulation" min="500" max="5000" value="2000"
                        step="100"><span id="maxPopulationValue">2000</span></label>
            </div>
        </div>

        <!-- God Mode Panel - Moved above canvas -->
        <div id="godModePanel">
            <h3>ÔøΩ God Mode Controls</h3>
            <div class="god-controls">
                <div class="god-section">
                    <h4>üçé Resources</h4>
                    <button class="god-btn" id="spawnFood">Drop Food</button>
                    <button class="god-btn" id="famine">Cause Famine</button>
                    <button class="god-btn" id="abundance">Create Abundance</button>
                </div>

                <div class="god-section">
                    <h4>‚òÑÔ∏è Disasters</h4>
                    <button class="god-btn" id="meteor">Meteor Strike</button>
                    <button class="god-btn" id="plague">Plague Outbreak</button>
                    <button class="god-btn" id="toxicSpill">Toxic Spill</button>
                    <button class="god-btn" id="radiation">Radiation Storm</button>
                </div>

                <div class="god-section">
                    <h4>üå°Ô∏è Climate</h4>
                    <button class="god-btn" id="heatwave">Heat Wave</button>
                    <button class="god-btn" id="iceage">Ice Age</button>
                    <button class="god-btn" id="normalClimate">Restore Normal</button>
                </div>

                <div class="god-section">
                    <h4>üß¨ Evolution</h4>
                    <button class="god-btn" id="massExtinction">Mass Extinction</button>
                    <button class="god-btn" id="mutationBoost">Mutation Boost</button>
                    <button class="god-btn" id="superCell">Create Super Cell</button>
                </div>

                <div class="god-section">
                    <h4>üåç Environment</h4>
                    <div class="slider-control">
                        <label>Temperature: <span id="tempValue">50%</span></label>
                        <input type="range" id="tempSlider" min="0" max="100" value="50">
                    </div>
                    <div class="slider-control">
                        <label>Toxicity: <span id="toxicValue">0%</span></label>
                        <input type="range" id="toxicSlider" min="0" max="100" value="0">
                    </div>
                    <div class="slider-control">
                        <label>Radiation: <span id="radiationValue">0%</span></label>
                        <input type="range" id="radiationSlider" min="0" max="100" value="0">
                    </div>
                </div>
            </div>
        </div>

        <div id="gameArea">
            <div id="canvasContainer">
                <canvas id="gameCanvas" width="1200" height="800"></canvas>
            </div>

            <div id="navigationPanel">
                <h3>üéÆ Navigation & View</h3>
                <div class="navigation-section">
                    <div class="nav-subsection">
                        <h4>üîç Zoom Controls</h4>
                        <div class="nav-group zoom-controls">
                            <button class="nav-btn" id="zoomIn">üîç+</button>
                            <button class="nav-btn" id="zoomOut">üîç-</button>
                            <span id="zoomLevel">100%</span>
                        </div>
                    </div>

                    <div class="nav-subsection">
                        <h4>üß≠ Camera Controls</h4>
                        <div class="pan-controls">
                            <div class="nav-group">
                                <button class="nav-btn" id="panUp">‚¨ÜÔ∏è</button>
                            </div>
                            <div class="nav-group">
                                <button class="nav-btn" id="panLeft">‚¨ÖÔ∏è</button>
                                <button class="nav-btn" id="panCenter">üéØ</button>
                                <button class="nav-btn" id="panRight">‚û°Ô∏è</button>
                            </div>
                            <div class="nav-group">
                                <button class="nav-btn" id="panDown">‚¨áÔ∏è</button>
                            </div>
                        </div>
                    </div>

                    <div class="nav-subsection">
                        <h4>üó∫Ô∏è Mini Map</h4>
                        <div class="minimap">
                            <div class="minimap-label">Map</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats and Info moved below canvas -->
        <div id="statsContainer">
            <div id="infoPanel">
                <div id="populationStats">
                    <h3>üìä Ecosystem Stats</h3>
                    <div id="populationInfo">
                        <p>Total Cells: <span id="totalCells">0</span></p>
                        <p>Generation: <span id="generation">1</span></p>
                        <p>Ecosystem Age: <span id="tick">0</span></p>
                        <p>Food Particles: <span id="foodCount">0</span></p>
                        <p>Active Colonies: <span id="activeColonies">0</span></p>
                        <p>Growth Rate: <span id="growthRate">+0</span>/tick</p>
                        <p>Avg Fitness: <span id="avgFitness">0.00</span></p>
                    </div>
                </div>

                <div id="traitDistribution">
                    <h3>üß¨ Defense Types</h3>
                    <div class="trait-bars">
                        <!-- Original Defense Types -->
                        <div class="trait-bar">
                            <span>üî∏ Spikes</span>
                            <div class="bar">
                                <div class="fill spikes"></div>
                            </div>
                            <span id="spikesCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>‚ò†Ô∏è Poison</span>
                            <div class="bar">
                                <div class="fill poison"></div>
                            </div>
                            <span id="poisonCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üõ°Ô∏è Armor</span>
                            <div class="bar">
                                <div class="fill armor"></div>
                            </div>
                            <span id="armorCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>ÔøΩ Regen</span>
                            <div class="bar">
                                <div class="fill regen"></div>
                            </div>
                            <span id="regenCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üëª Camo</span>
                            <div class="bar">
                                <div class="fill camo"></div>
                            </div>
                            <span id="camoCount">0</span>
                        </div>
                        <!-- New Advanced Defense Types -->
                        <div class="trait-bar">
                            <span>‚ö° Shield</span>
                            <div class="bar">
                                <div class="fill shield"></div>
                            </div>
                            <span id="shieldCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üîÜ Electric</span>
                            <div class="bar">
                                <div class="fill electric"></div>
                            </div>
                            <span id="electricCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üß≤ Magnetic</span>
                            <div class="bar">
                                <div class="fill magnetic"></div>
                            </div>
                            <span id="magneticCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üå´Ô∏è Phase</span>
                            <div class="bar">
                                <div class="fill phase"></div>
                            </div>
                            <span id="phaseCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üêù Swarm</span>
                            <div class="bar">
                                <div class="fill swarm"></div>
                            </div>
                            <span id="swarmCount">0</span>
                        </div>
                    </div>

                    <h3>üî∑ Cell Shapes</h3>
                    <div class="trait-bars">
                        <div class="trait-bar">
                            <span>‚≠ï Circle</span>
                            <div class="bar">
                                <div class="fill shape-circle"></div>
                            </div>
                            <span id="circleCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>ÔøΩ Triangle</span>
                            <div class="bar">
                                <div class="fill shape-triangle"></div>
                            </div>
                            <span id="triangleCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>‚¨ú Square</span>
                            <div class="bar">
                                <div class="fill shape-square"></div>
                            </div>
                            <span id="squareCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>‚¨¢ Hexagon</span>
                            <div class="bar">
                                <div class="fill shape-hexagon"></div>
                            </div>
                            <span id="hexagonCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>‚≠ê Star</span>
                            <div class="bar">
                                <div class="fill shape-star"></div>
                            </div>
                            <span id="starCount">0</span>
                        </div>
                    </div>

                    <h3>üß¨ Special Abilities</h3>
                    <div class="trait-bars">
                        <div class="trait-bar">
                            <span>üå± Photosynthesis</span>
                            <div class="bar">
                                <div class="fill ability-photosynthesis"></div>
                            </div>
                            <span id="photosynthesisCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>ü¶† Parasite</span>
                            <div class="bar">
                                <div class="fill ability-parasite"></div>
                            </div>
                            <span id="parasiteCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üê∫ Pack Hunter</span>
                            <div class="bar">
                                <div class="fill ability-pack"></div>
                            </div>
                            <span id="pack_hunterCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üè∞ Territorial</span>
                            <div class="bar">
                                <div class="fill ability-territorial"></div>
                            </div>
                            <span id="territorialCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üßõ Vampire</span>
                            <div class="bar">
                                <div class="fill ability-vampire"></div>
                            </div>
                            <span id="energy_vampireCount">0</span>
                        </div>
                    </div>

                    <h3>üéÇ Life Stages</h3>
                    <div class="trait-bars">
                        <div class="trait-bar">
                            <span>üë∂ Juvenile</span>
                            <div class="bar">
                                <div class="fill lifestage-juvenile"></div>
                            </div>
                            <span id="juvenileCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üë§ Adult</span>
                            <div class="bar">
                                <div class="fill lifestage-adult"></div>
                            </div>
                            <span id="adultCount">0</span>
                        </div>
                        <div class="trait-bar">
                            <span>üë¥ Elder</span>
                            <div class="bar">
                                <div class="fill lifestage-elder"></div>
                            </div>
                            <span id="elderCount">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Comprehensive Traits Analytics Panel -->
            <div class="stats-group">
                <h3>üß¨ Comprehensive Trait Analytics</h3>
                <div class="comprehensive-traits">
                    <div class="trait-category">
                        <h4>üìä Population Overview</h4>
                        <div class="trait-summary">
                            <div class="stat-item">
                                <span>üî¨ Total Entities:</span>
                                <span id="totalEntities">0</span>
                            </div>
                            <div class="stat-item">
                                <span>üß¨ Cells:</span>
                                <span id="totalCells">0</span>
                            </div>
                            <div class="stat-item">
                                <span>ü¶† Viruses:</span>
                                <span id="totalViruses">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="trait-category">
                        <h4>üî¢ Key Numerical Traits (Averages)</h4>
                        <div class="numerical-traits" id="numericalTraits">
                            <!-- Populated dynamically by JavaScript -->
                        </div>
                    </div>

                    <div class="trait-category">
                        <h4>üìà Trait Diversity Metrics</h4>
                        <div class="trait-summary">
                            <div class="stat-item">
                                <span>üåø Shannon Index:</span>
                                <span id="shannonIndex">0.00</span>
                            </div>
                            <div class="stat-item">
                                <span>üéØ Simpson Index:</span>
                                <span id="simpsonIndex">0.00</span>
                            </div>
                            <div class="stat-item">
                                <span>‚öñÔ∏è Evenness:</span>
                                <span id="evenness">0.00</span>
                            </div>
                        </div>
                    </div>

                    <div class="trait-category">
                        <h4>ü¶† Viral Characteristics</h4>
                        <div class="viral-traits" id="viralTraits">
                            <!-- Populated dynamically for virus-specific traits -->
                        </div>
                    </div>
                </div>
            </div>

            <div id="chartContainer">
                <canvas id="populationChart" width="400" height="200"></canvas>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>

</html>